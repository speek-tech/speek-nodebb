.tool-modal {
	@include media-breakpoint-up(md) {
		bottom: $spacer * 3;
		right: $spacer * 4;
	}
}

// New Post Creation Modal (Figma Design)
// Modal dialog positioning - 5% from top for all breakpoints
#speek-new-post-modal {
	.modal-dialog.modal-dialog-centered {
		// Remove Bootstrap's vertical centering and position 5% from top
		position: fixed !important;
		top: 5vh !important;
		left: 50% !important;
		// Keep horizontal centering
		transform: translateX(-50%) !important;
		margin: 0 !important;
		max-height: 90vh !important;
		width: auto;
		display: flex !important;
		align-items: flex-start !important;
		justify-content: center !important;

		@include desktop-xl {
			// On extra large desktops (1280px to 1535px), ensure proper horizontal centering
			// Reset any sidebar offset and center properly
			left: 50% !important;
			transform: translateX(-50%) !important;
		}

		@include desktop-2xl {
			// On 2xl desktops (â‰¥1536px), ensure proper horizontal centering
			left: 50% !important;
			transform: translateX(-50%) !important;
		}

		@include tablet {
			left: 50% !important;
            transform: translateX(-40%) !important;
		}

		@include mobile {
			.speek-new-post-modal-content{
				max-width: 512px;
			}
		}
	}
}

.speek-new-post-modal-content {
	background: #FFFFFF;
	border: 1px solid #F1EDE2;
	border-radius: 24px;
	box-shadow: 0px 24px 60px rgba(15, 23, 42, 0.12);
	padding: 32px;
	max-width: 520px;
	width: 100%;
	margin: 0 !important;
	max-height: 90vh;
	overflow-y: auto;
	display: flex;
	flex-direction: column;

	.speek-new-post-modal-header {
		border-bottom: none;
		padding: 0 0 16px 0;
		margin-bottom: 0;

		.speek-new-post-modal-title {
			font-size: 18px;
			font-weight: 600;
			line-height: 1.5555555555555556em;
			color: #122023;
			margin: 0;
		}

		.btn-close {
			opacity: 1;
			background: transparent;
			border: none;
			padding: 0;
			margin: 0;
		}
	}

	.speek-new-post-modal-body {
		padding: 0;
		margin: 0;

		.speek-new-post-form-content {
			display: flex;
			flex-direction: column;
			gap: 16px;
		}
	}

	.speek-new-post-modal-footer {
		border-top: none;
		padding: 16px 0 0 0;
		margin-top: 0;
		display: flex;
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
		gap: 8px;
	}
}

// Form Elements
.speek-form-group {
	display: flex;
	flex-direction: column;
	gap: 12px;
	width: 100%;

	.speek-form-label {
		font-size: 16px;
		font-weight: 400;
		line-height: 1.4em;
		color: #131B20;
		margin: 0;

		.speek-required-asterisk {
			color: #DC2626;
			margin-left: 4px;
			font-weight: 600;
		}
	}
}

.speek-select-wrapper,
.speek-input-wrapper,
.speek-textarea-wrapper {
	width: 100%;
	border-radius: 8px;
	background: #FFFFFF;
	border: 1px solid rgba(212, 212, 212, 1);
	padding: 6px 16px !important;
	box-shadow: none;
	min-height: 48px;
	display: flex;
	align-items: center;
	transition: border-color 0.2s ease;
	outline: none;

	&:hover {
		border-color: rgba(202, 195, 182, 1);
	}

	&:focus-within {
		border-color: rgba(165, 154, 132, 1);
		outline: none;
		border: 2px solid rgba(212, 212, 212, 1);
	}
}

// Select Dropdown
.speek-select-wrapper {
	position: relative;
	padding-right: 40px;

	.speek-select {
		width: 100%;
		background: transparent;
		border: none !important;
		border-radius: 0;
		font-size: 14px;
		font-weight: 400;
		line-height: 1.5em;
		color: #151F1D;
		appearance: none;
		cursor: pointer;
		padding: 0;
		min-height: auto;
		outline: none !important;
		box-shadow: none !important;

		&:focus {
			outline: none !important;
			border: none !important;
			box-shadow: none !important;
		}

		option {
			background: #FFFFFF;
			color: #122023;
		}
	}

	.speek-select-chevron {
		position: absolute;
		right: 16px;
		top: 50%;
		transform: translateY(-50%);
		pointer-events: none;
		width: 18px;
		height: 18px;
		color: #606971;
	}
}

// Input Field
.speek-input-wrapper {
	.speek-input {
		width: 100%;
		background: transparent;
		border: none !important;
		font-size: 14px;
		font-weight: 400;
		line-height: 1.5em;
		color: #151F1D;
		padding: 0;
		outline: none !important;
		box-shadow: none !important;

		&::placeholder {
			color: #8B8F96;
			font-weight: 400;
		}

		&:focus {
			outline: none !important;
			border: none !important;
			box-shadow: none !important;
		}

		&.speek-error {
			border: none;
		}
	}
}

// Textarea
.speek-textarea-wrapper {
	position: relative;
	align-items: stretch;
	min-height: 170px;
	padding: 16px;

	.speek-textarea {
		width: 100%;
		min-height: 130px;
		border: none !important;
		background: transparent;
		font-size: 14px;
		font-weight: 400;
		line-height: 1.5em;
		color: #151F1D;
		resize: none;
		padding: 0;
		margin: 0;
		outline: none !important;
		box-shadow: none !important;

		&::placeholder {
			color: #8B8F96;
		}

		&:focus {
			outline: none !important;
			border: none !important;
			box-shadow: none !important;
		}
	}
}

.speek-field-meta {
	display: flex;
	justify-content: flex-end;
	margin-top: 6px;
}

.speek-char-count {
	font-size: 13px;
	font-weight: 600;
	line-height: 1.3em;
	color: #9AA3AD;
}

// Formatting Toolbar
.speek-formatting-toolbar {
	display: flex;
	flex-direction: row;
	gap: 12px;
	margin-top: 4px;
	padding-top: 0;
	border-top: none;
	align-items: center;
	justify-content: flex-start;
	flex-wrap: wrap;

	.speek-format-btn {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		border: 1px solid #E6E1D6;
		background: #FFFFFF;
		cursor: pointer;
		padding: 0;
		margin: 0;
		transition: all 0.2s ease;

		&:hover {
			background: #FDFCF7;
			border-color: #C6BAA4;
		}

		&:active {
			transform: scale(0.95);
		}

		&:focus {
			outline: none;
		}

		.speek-format-icon {
			width: 18px;
			height: 18px;
			color: #475156;
			stroke-width: 1.4;
		}
	}
}

// Error Messages
.speek-error-message {
	font-size: 14px;
	font-weight: 400;
	line-height: 1.4285714285714286em;
	color: #DC2626;
	margin-top: 4px;
	min-height: 20px;
	display: none;

	&.show {
		display: block;
	}
}

// Modal Buttons
.speek-btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: 8px;
	padding: 12px 32px;
	border-radius: 9999px;
	font-size: 15px;
	font-weight: 700;
	line-height: 1.4285714285714286em;
	text-decoration: none;
	border: none;
	cursor: pointer;
	transition: all 0.2s ease;
	height: 48px;
	box-shadow: 0px 12px 24px rgba(15, 23, 42, 0.12);

	&--destructive {
		background: #DC2626;
		color: #FEF2F2;

		&:hover {
			background: #B91C1C;
			color: #FEF2F2;
		}

		&:focus-visible {
			outline: none;
			box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05), 0 0 0 3px rgba(220, 38, 38, 0.12);
		}
	}

	&--primary {
		background: #E6FF00;
		color: #27454B;

		&:hover {
			background: #D4E600;
			color: #27454B;
		}

		&:focus-visible {
			outline: none;
			box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05), 0 0 0 3px rgba(230, 255, 0, 0.3);
		}
	}
}

// Hide compose page interface when modal is showing
body.speek-modal-open,
body:has(#speek-new-post-modal.show),
body:has(#speek-new-post-modal.showing),
body.modal-open:has(#speek-new-post-modal) {
	// Remove any white borders that might appear on the page
	border: none !important;
	outline: none !important;
	
	// Ensure page containers don't get white borders
	#panel,
	#content,
	.container,
	.container-lg,
	.page-categories,
	.categories-page,
	.categories-grid {
		border: none !important;
		outline: none !important;
	}
	.composer,
	[component="composer"],
	.composer-container,
	.composer-wrapper,
	.composer-resizer,
	.composer-toolbar,
	.composer-content,
	.composer-title,
	.composer-category,
	.composer-tags,
	.composer-thumb,
	.composer-formatting,
	.composer-help {
		display: none !important;
		visibility: hidden !important;
		opacity: 0 !important;
		height: 0 !important;
		overflow: hidden !important;
	}
}

// Hide entire compose page content when modal is open
body.speek-modal-open #content > .composer,
body.speek-modal-open .page-compose,
body.speek-modal-open [data-template="compose"] {
	display: none !important;
}

// Permanently hide composer on compose page when modal has been used
body.speek-composer-hidden {
	.composer,
	[component="composer"],
	.composer-container,
	.composer-wrapper,
	.composer-resizer,
	.composer-toolbar,
	.composer-content,
	.composer-title,
	.composer-category,
	.composer-tags,
	.composer-thumb,
	.composer-formatting,
	.composer-help,
	#content > .composer,
	.page-compose,
	[data-template="compose"] {
		display: none !important;
		visibility: hidden !important;
		opacity: 0 !important;
		height: 0 !important;
		overflow: hidden !important;
	}
}

// Responsive styles
@include mobile {
	#speek-new-post-modal {
		.modal-dialog.modal-dialog-centered {
			// Maintain 5% from top on mobile with proper horizontal centering
			top: 5vh !important;
			left: 50% !important;
			transform: translateX(-50%) !important;
			width: calc(100vw - 32px);
			max-width: calc(100vw - 32px);
			max-height: 90vh !important;
		}
	}

	.speek-new-post-modal-content {
		padding: 16px;
		max-width: 100%;
		margin: 0 !important;
		max-height: 90vh;
	}
}

// Prevent outlines and unwanted borders on category page when modal is open
body.modal-open,
body.speek-modal-open,
body:has(#speek-new-post-modal.show),
body:has(#speek-new-post-modal.showing) {
	// Remove outlines from all elements
	*, *:before, *:after {
		outline: none !important;
	}
	
	// Specifically target page containers and common elements (not modal content)
	html, body,
	#panel, #content,
	.container, .container-fluid, .container-lg, .container-md, .container-sm, .container-xl, .container-xxl,
	.page-categories, .categories-page, .categories-grid,
	.category-card, .category-item,
	.row, .col, [class*="col-"],
	.layout-container, .main-container,
	iframe, .iframe-container,
	.topic-list, .topics-list,
	.speek-category-header, .speek-category-content, .speek-category-main {
		border: none !important;
		outline: none !important;
		box-shadow: none !important;
		-webkit-box-shadow: none !important;
		-moz-box-shadow: none !important;
	}
}

