body.template-topic {
	// Prevent horizontal scrolling
	overflow-x: hidden !important;
	overflow-y: auto !important; // Allow vertical scrolling but not horizontal
	max-width: 100vw;
	width: 100%;
	box-sizing: border-box;

	// Ensure all direct children respect width
	> * {
		max-width: 100%;
		box-sizing: border-box;
	}

	// Fix flex-fill container
	.flex-fill {
		max-width: 100%;
		width: 100%;
		overflow-x: hidden;
		overflow-y: visible !important; // Allow dropdowns to overflow
		box-sizing: border-box;
		position: relative !important; // Ensure proper stacking context
	}

	// Fix row containers
	.row {
		max-width: 100%;
		width: 100%;
		overflow-x: hidden;
		overflow-y: visible !important; // Allow dropdowns to overflow
		margin-left: 0;
		margin-right: 0;
		box-sizing: border-box;
		position: relative !important; // Ensure proper stacking context
	}
	.breadcrumb .breadcrumb-item:last-child {
		display: none;
	}

	.topic-header-container {
		gap: 16px;
		margin-bottom: 1rem;
		padding-left: 24px !important;
		padding-right: 24px !important;
		margin-top: 24px;
		max-width: 100%;
		width: 100%;
		overflow-x: hidden;
		overflow-y: visible !important; // Allow dropdown to overflow below
		box-sizing: border-box;
		// Prevent auto-scrolling when dropdown opens
		scroll-behavior: auto;
		position: relative !important; // Ensure proper stacking context
		z-index: 1 !important; // Lower than dropdown
		
		// Ensure dropdown menus can overflow without affecting layout
		* {
			scroll-margin: 0;
			scroll-padding: 0;
		}
		
		// Ensure dropdowns don't cause container to scroll
		.topic-space-actions,
		.topic-actions {
			overflow: visible !important;
			position: relative !important;
		}
		
		// Ensure all parent containers allow dropdown overflow
		.d-flex,
		.flex-column,
		.justify-content-between,
		.align-items-center {
			overflow: visible !important;
		}
	}
	@include mobile {
		.topic-header-container {
			padding-left: 16px !important;
			padding-right: 16px !important;
		}

		.topic {
			padding-left: 16px !important;
			padding-right: 16px !important;
		}

		// .posts-container {
		// 	padding-left: 16px !important;
		// 	padding-right: 16px !important;
		// }

		// Reduce left margin for replies on mobile
		.speek-post-replies-container .speek-topic-post-card,
		.speek-topic-post-card.speek-reply-card,
		[component="post"].speek-reply-card .speek-topic-post-card,
		[component="post"].speek-reply-card,
		.speek-post-card.speek-reply-card {
			margin-left: 16px !important;
			
			// Adjust vertical line position for mobile
			&::before {
				left: -16px !important; // Match mobile margin-left
			}
		}
		
		// Adjust vertical line position for mobile on replies container
		.speek-post-card-footer::after {
			left: 16px !important; // Match mobile margin-left
		}
		
		[component="post/replies/container"]::before {
			left: 16px !important; // Match mobile margin-left
		}
		
		[component="post/replies/container"] [component="post/replies"]::before {
			left: -16px; // Match mobile margin-left
		}

		// Adjust vertical line position for mobile on timeline events
		.posts [component="topic/event"].timeline-event::after {
			left: -16px !important; // Match mobile margin-left
		}
	}

	@include tablet {
		.topic-header-container {
			padding-left: 16px !important;
			padding-right: 16px !important;
		}

		.topic {
			padding-left: 16px !important;
			padding-right: 16px !important;
		}

		// Reduce left margin for replies on tablet
		.speek-post-replies-container .speek-topic-post-card,
		.speek-topic-post-card.speek-reply-card,
		[component="post"].speek-reply-card .speek-topic-post-card,
		[component="post"].speek-reply-card,
		.speek-post-card.speek-reply-card {
			margin-left: 20px !important;
			
			// Adjust vertical line position for tablet
			&::before {
				left: -20px !important; // Match tablet margin-left
			}
		}
		
		// Adjust vertical line position for tablet on replies container
		.speek-post-card-footer::after {
			left: 20px !important; // Match tablet margin-left
		}
		
		[component="post/replies/container"]::before {
			left: 20px !important; // Match tablet margin-left
		}
		
		[component="post/replies/container"] [component="post/replies"]::before {
			left: -20px; // Match tablet margin-left
		}

		// Adjust vertical line position for tablet on timeline events
		.posts [component="topic/event"].timeline-event::after {
			left: -20px !important; // Match tablet margin-left
		}

		// .posts-container {
		// 	padding-left: 16px !important;
		// 	padding-right: 16px !important;
		// }
	}

	.topic-header-buttons {
		.speek-back-button {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 44px;
			height: 44px;
			border-radius: 9999px;
			border: 1px solid #d4d4d4;
			background: #FDFDFC;
			color: #355E66;
			text-decoration: none;
			box-shadow: 0 2px 4px -2px rgba(17, 24, 39, 0.12),
				0 1px 2px rgba(17, 24, 39, 0.08);
			transition: box-shadow 0.2s ease, transform 0.2s ease,
				color 0.2s ease, border-color 0.2s ease;

			&:hover {
				text-decoration: none;
				transform: translateY(-1px);
				box-shadow: 0 6px 12px -6px rgba(17, 24, 39, 0.2);
			}

			&:focus-visible {
				outline: none;
				border-color: #355E66;
				box-shadow: 0 0 0 3px rgba(53, 94, 102, 0.12);
			}
		}

		.speek-back-button__icon {
			display: inline-flex;
			align-items: center;
			justify-content: center;
		}

		.speek-back-button__chevron {
			width: 20px;
			height: 20px;
			color: currentColor;
		}

		.speek-back-button__label {
			position: absolute;
			width: 1px;
			height: 1px;
			padding: 0;
			margin: -1px;
			overflow: hidden;
			clip: rect(0, 0, 0, 0);
			border: 0;
		}
	}

	.topic-header-title {
		.topic-title-main {
			font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
			font-weight: 700;
			font-size: 24px;
			line-height: 1.3333333333333333em;
			color: #355E66;
			margin: 0;
			padding: 0;

			.topic-title {
				word-break: break-word;
			}
		}
	}

	.topic-space-actions {
		flex-wrap: wrap;

		.topic-badges {
			flex-wrap: wrap;
		}

		.topic-actions {
			display: flex;
			align-items: center;
			gap: 16px;
			flex-wrap: nowrap; // Keep sort and reply button in same row on mobile
			flex-shrink: 0;
			
			// Sort dropdown takes natural width
			.btn-group {
				flex-shrink: 0;
				white-space: nowrap;
				position: relative !important; // Ensure dropdown positioning context
				
				// Dropdown menu should overflow below content, not cause scrolling
				.dropdown-menu {
					position: absolute !important;
					top: calc(100% + 8px) !important; // Position below button with gap
					left: 0 !important;
					right: auto !important;
					z-index: 999999 !important; // Extremely high z-index to ensure visibility
					margin: 0 !important; // Remove all margins
					padding: 8px !important; // Internal padding for menu items
					min-width: 200px !important; // Minimum width for readability
					max-width: 300px !important; // Maximum width to prevent overflow
					width: auto !important; // Auto width based on content
					overflow: visible !important;
					transform: none !important; // Remove any transforms
					// Prevent browser from auto-scrolling to keep dropdown in view
					scroll-margin: 0 !important;
					scroll-padding: 0 !important;
					// Ensure it doesn't affect document flow
					pointer-events: auto !important;
					// Remove any box model effects that could cause scrolling
					box-sizing: border-box !important;
					// Background and styling
					background: rgba(252, 249, 236, 0.98) !important;
					border: 1px solid rgba(53, 94, 102, 0.12) !important;
					border-radius: 12px !important;
					box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 
					           0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
					backdrop-filter: blur(8px) !important;
					
					// Style dropdown items
					.dropdown-item {
						padding: 8px 12px !important;
						margin: 2px 0 !important;
						border-radius: 8px !important;
						font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
						font-size: 14px !important;
						font-weight: 500 !important;
						line-height: 1.4 !important;
						color: #355E66 !important;
						background: transparent !important;
						border: none !important;
						text-decoration: none !important;
						transition: all 0.15s ease !important;
						cursor: pointer !important;
						display: flex !important;
						align-items: center !important;
						gap: 8px !important;
						white-space: nowrap !important;
						
						&:hover {
							background: rgba(53, 94, 102, 0.08) !important;
							color: #355E66 !important;
							text-decoration: none !important;
						}
						
						&:active {
							background: rgba(53, 94, 102, 0.12) !important;
							transform: scale(0.98) !important;
						}
						
						&:focus {
							outline: none !important;
							background: rgba(53, 94, 102, 0.08) !important;
							box-shadow: 0 0 0 2px rgba(53, 94, 102, 0.2) !important;
						}
						
						// Icon styling
						i {
							width: 16px !important;
							height: 16px !important;
							font-size: 12px !important;
							color: currentColor !important;
							opacity: 0.6 !important;
						}
						
						// Selected state
						&.active,
						&[aria-selected="true"] {
							background: rgba(53, 94, 102, 0.1) !important;
							font-weight: 600 !important;
							
							i {
								opacity: 1 !important;
							}
						}
					}
				}
			}
			
			// Reply button takes remaining space
			.speek-btn {
				flex: 1 1 auto;
				min-width: 0;
				white-space: nowrap;
			}
		}
	}
	
	// Hide post bar (toolbar with mark unread, watch, sort, tools, reply) on mobile and tablet
	.topic-main-buttons,
	[component="topic/main-buttons"],
	.post-bar {
		@media (max-width: 991.98px) {
			display: none !important;
		}
	}

	// Topic Badge Styles
	.speek-topic-badge {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		gap: 4px;
		padding: 2px 8px;
		border-radius: 8px;
		font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
		font-size: 12px;
		font-weight: 600;
		line-height: 1.3333333333333333em;
		text-decoration: none;
		transition: all 0.2s ease;

		&__icon {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			flex-shrink: 0;
		}

		&__icon-svg {
			width: 12px;
			height: 12px;
			color: currentColor;
		}

		&__text {
			color: inherit;
			font-family: inherit;
			white-space: nowrap;
		}

		&--category {
			background: #B6D3DA;
			border: 1px solid transparent;
			color: #192C30;

			&:hover {
				background: #A8C5CC;
				color: #192C30;
				text-decoration: none;
			}
		}

		&--outline {
			background: rgba(255, 255, 255, 0.5);
			border: 1px solid #F3F1E9;
			color: #355E66;
		}
	}
	
	// Hide participants (users), views (eye), and followers (glasses) badges from topic header
	.topic-badges {
		// Hide badges containing users icon (participants)
		.speek-topic-badge:has(svg[data-lucide="users"]),
		// Hide badges containing eye icon (views)
		.speek-topic-badge:has(svg[data-lucide="eye"]),
		// Hide badges containing glasses icon (followers)
		.speek-topic-badge:has(svg[data-lucide="glasses"]) {
			display: none !important;
		}
	}

	// Topic Button Styles
	.speek-btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		gap: 8px;
		padding: 8px 32px;
		border-radius: 9999px;
		font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
		font-size: 14px;
		font-weight: 700;
		line-height: 1.4285714285714286em;
		text-decoration: none;
		border: none;
		cursor: pointer;
		transition: all 0.2s ease;
		height: 44px;

		&__icon {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			flex-shrink: 0;
		}

		&__icon-svg {
			width: 16px;
			height: 16px;
			color: currentColor;
		}

		&__text {
			color: inherit;
			font-family: inherit;
			white-space: nowrap;
		}

		&--lg {
			height: 44px;
		}

		&--ghost {
			background: rgba(230, 226, 210, 0.9);
			backdrop-filter: blur(12px);
			color: #355E66;
			box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05);
			padding: 8px 16px; // Figma spec: 8px 16px for sort dropdown

			&:hover {
				background: rgba(220, 216, 200, 0.95);
				color: #355E66;
				text-decoration: none;
			}

			&:focus-visible {
				outline: none;
				box-shadow: 0 0 0 3px rgba(53, 94, 102, 0.12);
			}
		}

		&--primary {
			background: #E6FF00;
			color: #27454B;
			box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05);

			&:hover {
				background: #D4E600;
				color: #27454B;
				text-decoration: none;
			}

			&:focus-visible {
				outline: none;
				box-shadow: 0 0 0 3px rgba(230, 255, 0, 0.3);
			}

			&.disabled {
				opacity: 0.6;
				cursor: not-allowed;
				pointer-events: none;
			}
		}
	}

	.topic {
		max-width: 100%;
		width: 100%;
		overflow-x: hidden;
		overflow-y: visible !important; // Allow dropdowns to overflow
		box-sizing: border-box;
		position: relative !important; // Ensure proper stacking context

		.posts-container {
			max-width: 100%;
			width: 100%;
			background: transparent;
			max-width: 100%;
			width: 100%;
			overflow-x: hidden;
			overflow-y: visible !important; // Allow dropdowns to overflow
			box-sizing: border-box;
			position: relative !important; // Ensure proper stacking context
		}

		.posts {
			// Timeline style disabled for card-based design
			// @include timeline-style;

			.post-header {
				font-size: 0.8125rem;
				line-height: 1.25rem;

				.bookmarked {
					transition: $transition-fade;
				}
			}

			// Vertical line on the left side of timeline events (e.g., "13 DAYS LATER")
			.timeline-event {
				position: relative;
				overflow: visible !important;
				border-left: 2px solid #E0DBC7 !important;
				padding-top: 15px;
				margin-top: -15px !important;
				margin-left: 0.5px;
				z-index: 0; // Behind the main post card
				
				// Pseudo element for vertical line - behind main post
				&::after {
					content: '';
					position: absolute;
					left: -24px; // Position to the left of the event
					top: -36px; // Extend upward
					bottom: 0;
					width: 2px;
					height: calc(100% + 36px); // Full height plus extension
					background-color: #E0DBC7 !important;
					z-index: -1; // Behind the main post card
					display: block !important;
					visibility: visible !important;
					opacity: 1 !important;
					pointer-events: none; // Don't interfere with interactions
				}
			}

		[component="post"] {
			&.selected .post-container {
				background-color: mix($body-bg, $body-color, 90%);
			}
			&.deleted .post-container .content { opacity: .65; }

			[component="post/content"] {
				background-color: #FDFDFC !important;
				@include fix-lists();

				> blockquote {
					> blockquote {
						> *:not(.blockquote) {
							display: none;
						}
					}

					> blockquote.uncollapsed {
						> *:not(.blockquote) {
							display: block;
						}
					}
				}

				@include media-breakpoint-up(lg) {
					table { // text-break breaks table formatting
					 	word-break:initial!important;
					}
				}
			}
		}

		// Topic Post Card Styles (Figma Design)
		.speek-topic-post-card {
			background: #FDFDFC !important;
			background-color: #FDFDFC !important;
			border-radius: 16px;
			padding: 16px;
			display: flex;
			flex-direction: column;
			gap: 12px;
			margin-bottom: 0;
			border: none;
			box-shadow: none;
			position: relative;
			z-index: 1; // Above timeline event pseudo elements
			// Admin action buttons
		.speek-post-actions {
			display: none;
			align-items: center;
			gap: 8px;
			margin-top: 8px;
			font-size: 0; // Hide any text content that might leak from template conditions
			
			// Hide reply, quote, and downvote icons (keep conditions intact)
			[component="post/reply"],
			[component="post/quote"],
			[component="post/downvote"],
			a[component="post/reply"],
			a[component="post/quote"],
			a[component="post/downvote"] {
				display: none !important;
				visibility: hidden !important;
			}
			
			// Restore font-size for visible elements
			[component="post/tools"],
			[component="post/announce-count"] {
				font-size: initial;
			}
			
			// Style dropdown menu for three-dot menu
			[component="post/tools"] {
				.dropdown-menu {
					background-color: #FCF9ECFA !important;
					background: #FCF9ECFA !important;
				}
			}
		}
		
		// Style dropdown menu in post actions footer (if exists)
		.speek-post-actions-footer {
			[component="post/actions"] {
				[component="post/tools"] {
					.dropdown-menu {
						background-color: #FCF9ECFA !important;
						background: #FCF9ECFA !important;
					}
				}
			}
		}

			// Ensure all content inside has correct background
			.content,
			[component="post/content"],
			.speek-post-description {
				background-color: #FDFDFC !important;
			}
			
			// Main post (not a reply) - transparent background
			&:not(.speek-reply-card) {
				z-index: 0;
			}
			
			// Override for reply cards
			&.speek-reply-card {
				background: #FDFDFC !important;
				background-color: #FDFDFC !important;
				border: 1px solid #E0DBC7 !important;
				padding: 16px;
				gap: 12px;
				margin-bottom: 0;

				.content,
				[component="post/content"],
				.speek-post-description {
					background-color: #FDFDFC !important;
				}
			}

			&.deleted {
				opacity: 0.65;
			}

			// Force #FDFDFC background for all posts (including unread) - Edge case fix
			&.unread,
			&[data-unread="true"],
			&[class*="unread"] {
				background: #FDFDFC !important;
				background-color: #FDFDFC !important;
			}

			// User Info Section
			.speek-post-card-header {
				display: flex;
				align-items: center;
				gap: 12px;
				// No background color for main post header - only for replies
				// Ensure header doesn't override card background
				background-color: transparent !important;

				.speek-user-avatar {
					flex-shrink: 0;
					width: 48px;
					height: 48px;
					display: inline-flex;
					align-items: center;
					justify-content: center;
					border-radius: 9999px;
					overflow: hidden;
					cursor: default !important;
					pointer-events: none !important;

					img {
						width: 100%;
						height: 100%;
						object-fit: cover;
						pointer-events: none !important;
					}

					// Make avatar badges non-clickable
					[component="user/status"],
					[component="user/locality"],
					.status,
					.small {
						pointer-events: none !important;
						cursor: default !important;
					}
				}

				.speek-user-name {
					cursor: default !important;
					pointer-events: none !important;
				}

				.speek-user-info {
					display: flex;
					flex-direction: column;
					gap: 4px;
					flex: 1;
					min-width: 0;

					.speek-user-name {
						display: flex;
						align-items: center;
						gap: 4px;
						flex-wrap: wrap;

						a {
							font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
							font-size: 16px;
							font-weight: 700;
							line-height: 1.5em;
							color: #122023;
							text-decoration: none;

							&:hover {
								color: #355E66;
							}
						}
					}

					.speek-post-timestamp {
						font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
						font-size: 14px;
						font-weight: 400;
						line-height: 1.4285714285714286em;
						color: #525252;

						.timeago {
							color: inherit;
						}
					}
				}

			// 3-dot menu in header
			[component="post/tools"] {
				margin-left: auto;
				flex-shrink: 0;
				align-self: flex-start;

				.dropdown-toggle {
					padding: 4px 8px;
					background: transparent !important;
					border: none !important;

					i {
						color: #525252 !important;
						font-size: 18px;
					}

					&:hover i {
						color: #355E66 !important;
					}
				}

				.dropdown-menu {
					background-color: #FCF9ECFA !important;
					background: #FCF9ECFA !important;
					border: 1px solid rgba(0, 0, 0, 0.1) !important;
					box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
					right: 0 !important;
					left: auto !important;
					min-width: 200px !important;

					.dropdown-item {
						color: #122023 !important;
						font-size: 14px !important;

						i {
							color: #525252 !important;
							font-size: 16px !important;
						}

						&:hover {
							background-color: rgba(53, 94, 102, 0.1) !important;
						}
					}
				}
				}
			}

			// Content Section
			.speek-post-card-content {
				display: flex;
				flex-direction: column;
				background-color: #FDFDFC !important;
				gap: 16px;

				.speek-post-content-wrapper {
					display: flex;
					flex-direction: column;
					gap: 8px;
				}

				.speek-post-title {
					font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
					font-size: 18px;
					font-weight: 700;
					line-height: 1.5555555555555556em;
					color: #355E66;
					margin: 0;
				}

				.speek-post-description {
					font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
					font-size: 16px;
					font-weight: 400;
					line-height: 1.6em;
					color: #525252;
					margin: 0;
					margin-bottom: 0 !important;
					
					// Remove margin-bottom from all child elements
					p,
					div,
					span,
					* {
						margin-bottom: 0 !important;
					}
					
					// Remove margin from last child
					> *:last-child {
						margin-bottom: 0 !important;
					}

					@include fix-lists();

					> blockquote {
						> blockquote {
							> *:not(.blockquote) {
								display: none;
							}
						}

						> blockquote.uncollapsed {
							> *:not(.blockquote) {
								display: block;
							}
						}
					}

					@include media-breakpoint-up(lg) {
						table {
							word-break: initial !important;
						}
					}
				}

				.speek-post-signature {
					font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
					font-size: 12px;
					color: #525252;
					margin-top: 8px;
					padding-top: 8px;
					border-top: 1px solid #F3F1E9;
				}
			}

			// Reaction Container
			.speek-post-card-footer {
				display: flex;
				flex-direction: row;
				gap: 0;
				align-items: center;
				justify-content: flex-start;
				border-top: none !important;
				padding-top: 0 !important;
				margin-top: 0 !important;
				position: relative;
				
				// Vertical line starting from footer connecting to replies
				// &::after {
				// 	content: '';
				// 	position: absolute;
				// 	left: 24px; // Match the position where replies start
				// 	bottom: -16px; // Extend below footer
				// 	width: 2px;
				// 	height: 16px; // Connect to replies container
				// 	background-color: #E0DBC7;
				// 	z-index: 0;
				// 	display: block !important;
				// }
				
				// Admin controls
				.speek-admin-controls {
					display: flex;
					gap: 8px;
					align-items: center;
					padding-left: 16px;
					border-left: 1px solid #F3F1E9;
					margin-left: 16px;
					
					.btn-ghost-admin {
						display: inline-flex;
						align-items: center;
						justify-content: center;
						width: 32px;
						height: 32px;
						border-radius: 8px;
						background: transparent;
						border: 1px solid #E0DBC7;
						color: #355E66;
						text-decoration: none;
						transition: all 0.2s ease;
						
						i {
							font-size: 14px;
						}
						
						&:hover {
							background: #F3F1E9;
							border-color: #355E66;
							color: #355E66;
							text-decoration: none;
						}
						
						&[component="post/purge"]:hover {
							background: #fee;
							border-color: #dc3545;
							color: #dc3545;
						}
					}
				}

				.speek-reaction-item {
					display: flex;
					flex-direction: row;
					align-items: center;
					justify-content: flex-start;
					gap: 8px;
					width: 84px;
					height: auto;
					background: transparent;
					border: none;
					padding: 0;
					margin: 0;

					.speek-reaction-link {
						display: flex;
						flex-direction: row;
						align-items: center;
						justify-content: flex-start;
						gap: 8px;
						text-decoration: none;
						color: inherit;
						cursor: pointer;
						transition: opacity 0.2s ease;
						width: 100%;
						height: 100%;
						background: transparent;
						border: none;
						padding: 0;
						margin: 0;

						&:hover {
							opacity: 0.8;
						}

						&.active {
							.speek-reaction-icon {
								color: #355E66;
							}
						}

						&.hidden {
							display: none;
						}
					}

					.speek-reaction-icon {
						width: 24px;
						height: 24px;
						color: #355E66;
						flex-shrink: 0;
					}

					.speek-reaction-count {
						font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
						font-size: 16px;
						font-weight: 700;
						line-height: 1.5em;
						color: #355E66;
					}
				}
			}

			// Replies container
			.speek-post-replies-container {
				margin-top: 16px;
				padding-top: 16px;
				border-top: 1px solid #F3F1E9;
			}
		}

			[component="post/upvote"], [component="post/downvote"] {
				&.upvoted, &.downvoted {
					background-color: var(--btn-ghost-active-color);

					&:hover {
						background-color: var(--btn-ghost-hover-color);
					}
				}
			}
		}
	}

	.quick-reply {
		@include topic-avatars();
	}

	// Quick Reply Styles (Figma Design)
	.speek-quick-reply {
		margin-top: 24px;
		
		.speek-quick-reply-label {
			font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
			font-size: 16px;
			font-weight: 400;
			line-height: 1.5em;
			color: #122023;
			margin: 0;
		}

		.speek-quick-reply-textarea-wrapper {
			position: relative;
			background: #FDFDFC;
			border: 1px solid #D4D4D4;
			border-radius: 8px;
			box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);
			padding: 8px 12px;
			display: flex;
			flex-direction: column;
			gap: 4px;
			min-height: 80px;
			transition: border-color 0.2s ease;
			
			&.speek-error {
				border-color: #DC2626 !important;
				
				&:focus-within {
					border-color: #DC2626 !important;
				}
			}

			&:focus-within {
				outline: none;
				border-color: #D4D4D4;
				box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);
			}
			
			&.speek-error:focus-within {
				border-color: #DC2626 !important;
			}

			.speek-quick-reply-char-count {
				display: flex;
				align-items: center;
				justify-content: flex-start;
				font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
				font-size: 12px;
				font-weight: 700;
				line-height: 1.3333333333333333em;
				color: #D4D4D4;
				margin-top: 4px;

				span[component="topic/quickreply/char-current"] {
					color: #D4D4D4;
				}

				span[component="topic/quickreply/char-max"] {
					color: #D4D4D4;
				}
			}

			.speek-quick-reply-textarea {
				font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
				font-size: 14px;
				font-weight: 400;
				line-height: 1.4285714285714286em;
				color: #122023;
				background: #FDFDFC;
				border: none !important;
				resize: none;
				outline: none !important;
				padding: 0;
				min-height: 80px;
				width: 100%;
				box-shadow: none !important;

				&::placeholder {
					color: #525252;
				}

				&:focus {
					outline: none !important;
					box-shadow: none !important;
					border: none !important;
				}

				&:active {
					outline: none !important;
					box-shadow: none !important;
					border: none !important;
				}
			}

			.imagedrop {
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				display: none;
				align-items: center;
				justify-content: center;
				background: rgba(255, 255, 255, 0.9);
				border-radius: 8px;
				z-index: 10;

				&.active {
					display: flex;
				}
			}
		}

		// Error message styling (similar to create new post modal)
		.speek-error-message {
			font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
			font-size: 14px;
			font-weight: 400;
			line-height: 1.4285714285714286em;
			color: #DC2626;
			margin-top: 4px;
			min-height: 20px;
			display: none;

			&.show {
				display: block;
			}
		}

		.speek-quick-reply-submit-btn {
			font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
			font-size: 14px;
			font-weight: 700;
			line-height: 1.4285714285714286em;
			color: #27454B;
			background: #E6FF00;
			border: none;
			border-radius: 9999px;
			padding: 8px 16px;
			height: 36px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
			width: auto;
			max-width: 121px;
			box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05);
			cursor: pointer;
			transition: box-shadow 0.2s ease, transform 0.2s ease, max-width 0.3s ease;

			&:hover {
				transform: none;
				box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05);
			}

			&:active {
				transform: translateY(0);
				box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05);
			}

			&:focus {
				outline: none;
				box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05), 0 0 0 3px rgba(230, 255, 0, 0.3);
			}

			&:disabled {
				opacity: 0.6;
				cursor: not-allowed;
				transform: none;
			}
			
			// Button content wrapper
			.speek-submit-text {
				white-space: nowrap;
			}
			
			// Loader icon
			.speek-submit-loader {
				flex-shrink: 0;
				color: #27454B;
				animation: speek-spin 1s linear infinite;
			}
			
			// Show loader state
			&.is-loading {
				max-width: 165px; // Allow space for "Submitting..." text + loader
				
				.speek-submit-loader {
					display: block !important;
				}
			}
		}
		
		// Loader spin animation
		@keyframes speek-spin {
			from {
				transform: rotate(0deg);
			}
			to {
				transform: rotate(360deg);
			}
		}
	}

	[component="post/parent"] {
		margin-left: 2.5rem;
		[component="post/parent/content"] > p:last-child {
			margin-bottom: 0;
		}
		&[data-collapsed="true"] {
			> [component="post/parent/content"] > * {
				font-size: 13px!important;
				line-height: var(--bs-btn-line-height)!important;
			}
		}
	}

	[component="post/replies/container"] {
		position: relative;
		overflow: visible !important; // Ensure lines are visible
		
		// Vertical line connecting main post to all replies - continuous line through container
		&::before {
			content: '';
			position: absolute;
			left: 24px; // Position at where replies start (matching margin-left)
			top: -16px; // Start above container to connect with footer line
			bottom: 0;
			width: 2px;
			background-color: #E0DBC7 !important;
			z-index: 0;
			display: block !important;
			visibility: visible !important;
			opacity: 1 !important;
			pointer-events: none; // Don't interfere with interactions
		}
		
		// Vertical line on the replies list
		[component="post/replies"] {
			position: relative;
			overflow: visible !important;
			
			&::before {
				content: '';
				position: absolute;
				left: -24px; // Position to the left of the replies (at the start of indentation)
				top: 0;
				width: 2px;
				background-color: #E0DBC7 !important;
				z-index: 0;
				display: block !important;
				visibility: visible !important;
				opacity: 1 !important;
				height: 100%; // Use 100% height
				pointer-events: none; // Don't interfere with interactions
			}
			
			// Adjust line height to stop before last reply
			&:has(> li:last-child)::before {
				height: calc(100% - 24px); // Subtract approximate height of last reply card
			}
		}
		
		.icon {
			display: none !important;
		}

		.post-header .icon {
			display: initial !important;

			.status {
				display: none;
			}
		}

		.timeline-event {
			display: none !important;
		}

		[component="post"] {
			padding-top: 0 !important;
			padding-bottom: $spacer;
			position: relative;
			overflow: visible !important;
			&:last-of-type {
				padding-bottom: 0;
				.post-footer {
					padding-bottom: 0!important;
					border-bottom: none !important;
				}
			}
		}

		// Apply reply card styles to all posts inside replies container
		.speek-topic-post-card {
			background: #FDFDFC !important;
			background-color: #FDFDFC !important;
			border: 1px solid #E0DBC7 !important;
			border-radius: 16px;
			padding: 16px;
			gap: 12px;
			margin-bottom: 24px;
			margin-left: 24px; // Add left spacing for comment-like indentation
			position: relative;
			z-index: 2; // Ensure cards appear above the duplicate and vertical line
			overflow: visible; // Ensure lines are visible
			
			// Vertical line on the left side of each reply
			&::before {
				content: '';
				position: absolute;
				left: -24px; // Position to the left of the card (matching margin-left)
				top: -24px; // Extend 24px upward
				bottom: 0;
				width: 2px;
				height: calc(100% + 24px); // Explicit height calculation
				background-color: #E0DBC7 !important;
				z-index: 10; // Ensure it's visible above other elements
				display: block !important;
				visibility: visible !important;
				opacity: 1 !important;
				pointer-events: none; // Don't interfere with interactions
				// Add second line using box-shadow
				box-shadow: 4px 0 0 0 #E0DBC7 !important;
			}
			
			// Remove vertical line for last reply
			&:last-child::before,
			&:last-of-type::before {
				display: none !important;
			}
			
			// Duplicate copy of each reply - positioned behind
			&::after {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: transparent !important;
				background-color: transparent !important;
				border: 2px solid #E0DBC7 !important;
				border-radius: 16px;
				border-bottom-left-radius: 16px;
				z-index: -1; // Behind the original card
				display: block !important;
				// Position duplicate slightly offset (e.g., to the right or down)
				transform: translate(4px, 4px);
			}

			// Show footer for admin controls in replies
			.speek-post-card-footer {
				display: none !important;
			}
			
			.speek-post-card-header {
				gap: 12px;
				padding: 4px 0 0 0;
				background-color: transparent !important; // Ensure header doesn't override card background

				.speek-user-info {
					gap: 0;

					.speek-user-name {
						a {
							font-size: 16px;
							font-weight: 700;
							line-height: 1.5em;
							color: #122023;
						}
					}

					.speek-post-timestamp {
						font-size: 14px;
						font-weight: 400;
						line-height: 1.4285714285714286em;
						color: #525252;
					}
				}
			}

			.speek-post-card-content {
				gap: 0;
				padding: 0;

				.speek-post-content-wrapper {
					gap: 0;
				}

				.speek-post-description {
					font-size: 16px;
					font-weight: 400;
					line-height: 1.5em;
					color: #122023;
					background-color: #FDFDFC !important;
					margin-bottom: 0 !important;
					
					// Remove margin-bottom from all child elements
					p,
					div,
					span,
					* {
						margin-bottom: 0 !important;
					}
					
					// Remove margin from last child
					> *:last-child {
						margin-bottom: 0 !important;
					}
				}
			}

			.speek-post-card-footer {
				display: none;
			}

			.content,
			[component="post/content"] {
				background-color: #FDFDFC !important;
			}
		}
	}

	// Nested Reply/Comment Styles (Figma Design) - Most specific selector
	.speek-topic-post-card.speek-reply-card,
	[component="post"].speek-reply-card .speek-topic-post-card,
	[component="post"].speek-reply-card,
	.speek-post-replies-container .speek-topic-post-card,
	.speek-post-card.speek-reply-card {
		background: #FDFDFC !important;
		background-color: #FDFDFC !important;
		border: 1px solid #E0DBC7 !important;
		border-radius: 16px !important;
		padding: 16px !important;
		display: flex !important;
		flex-direction: column !important;
		gap: 10px !important;
		margin-bottom: 0 !important;
		margin-left: 24px !important; // Add left spacing for comment-like indentation
		position: relative;
		z-index: 2; // Ensure cards appear above the vertical line and duplicate
		overflow: visible !important; // Ensure lines are visible
		
		// Vertical line on the left side of each reply
		&::after {
			content: '';
			position: absolute;
			left: -24px; // Position to the left of the card (matching margin-left)
			top: -36px; // Extend 24px upward
			bottom: 0;
			width: 2px;
			height: calc(100%); // Explicit height calculation
			background-color: #E0DBC7 !important;
			z-index: 10; // Ensure it's visible above other elements
			display: block !important;
			visibility: visible !important;
			opacity: 1 !important;
			pointer-events: none; // Don't interfere with interactions
			// Add second line using box-shadow
			// box-shadow: 4px 0 0 0 #E0DBC7 !important;
		}
		
		// Remove vertical line for last reply
		// &:last-child::before,
		// &:last-of-type::after {
		// 	display: none !important;
		// }
		
		// Duplicate copy of each reply - positioned behind
		&::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: transparent !important;
			background-color: transparent !important;
			border-left: 2px solid #E0DBC7 !important;
			border-bottom: 2px solid #E0DBC7 !important;
			border-bottom-left-radius: 16px !important;
			z-index: -100; // Behind the original card
			display: block !important;
			// Position duplicate slightly offset (e.g., to the right or down)
		}
		
		// Responsive transform values for duplicate copy
		@include mobile {
			&::before {
				transform: translate(-8px, 0px) !important; // Mobile transform
			}
		}
		
		@include tablet {
			&::before {
				transform: translate(-8px, 0px) !important; // Tablet transform
			}
		}
		@include tablet-up {
			&::before {
				transform: translate(-4px, 0px) !important; // Tablet transform
			}
		}
		
		// Desktop breakpoints (1024px and above) - use desktop-up to cover all desktop sizes
		@include desktop-up {
			&::before {
				transform: translate(-24px, 0px) !important; // Desktop transform (1024px+)
			}
		}
		
		// Hide footer for reply cards
		.speek-post-card-footer {
			display: none !important;
		}
		
		// Show admin delete controls for reply cards
		// Ensure all nested components have the correct background
		// Header background color only for child posts (replies)
		.speek-post-card-header {
			background-color: transparent !important; // Ensure header doesn't override card background
			background: transparent !important;
			display: flex !important;
			flex-direction: row !important;
			align-items: center !important;
			gap: 12px !important;
			padding: 4px 0 0 0 !important;
			width: 100% !important;
			align-self: stretch !important;

			.speek-user-avatar {
				width: 48px !important;
				height: 48px !important;
				flex-shrink: 0 !important;
				background-color: #F6FFA3 !important;
				background: #F6FFA3 !important;
				cursor: default !important;
				pointer-events: none !important;

				img {
					pointer-events: none !important;
				}

				// Make avatar badges non-clickable
				[component="user/status"],
				[component="user/locality"],
				.status,
				.small {
					pointer-events: none !important;
					cursor: default !important;
				}
			}

			.speek-user-info {
				background-color: transparent !important; // Ensure info doesn't override card background
				background: transparent !important;
				display: flex !important;
				flex-direction: column !important;
				gap: 0 !important;
				flex: 1 !important;
				min-width: 0 !important;

				.speek-user-name {
					background-color: transparent !important; // Ensure name doesn't override card background
					background: transparent !important;
					font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
					font-size: 16px !important;
					font-weight: 700 !important;
					line-height: 1.5em !important;
					color: #122023 !important;
					cursor: default !important;
					pointer-events: none !important;
				}

				.speek-post-timestamp {
					background-color: transparent !important; // Ensure timestamp doesn't override card background
					background: transparent !important;
					font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
					font-size: 14px !important;
					font-weight: 400 !important;
					line-height: 1.4285714285714286em !important;
					color: #525252 !important;

					.timeago {
						color: #525252 !important;
						background-color: transparent !important; // Ensure timeago doesn't override card background
						background: transparent !important;
					}
				}
			}

			// 3-dot menu in reply card header
			[component="post/tools"] {
				margin-left: auto !important;
				flex-shrink: 0 !important;
				align-self: flex-start !important;

				.dropdown-toggle {
					padding: 4px 8px !important;
					background: transparent !important;
					border: none !important;

					i {
						color: #525252 !important;
						font-size: 18px !important;
					}

					&:hover i {
						color: #355E66 !important;
					}
				}

			.dropdown-menu {
				background-color: #FCF9ECFA !important;
				background: #FCF9ECFA !important;
				border: 1px solid rgba(0, 0, 0, 0.1) !important;
				box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
				right: 0 !important;
				left: auto !important;
				min-width: 200px !important;

				.dropdown-item {
					color: #122023 !important;
					font-size: 14px !important;

					i {
						color: #525252 !important;
						font-size: 16px !important;
					}

					&:hover {
						background-color: rgba(53, 94, 102, 0.1) !important;
					}
				}
			}
			}
		}

		.speek-post-card-content {
			background-color: #FDFDFC !important;
			background: #FDFDFC !important;
			display: flex !important;
			flex-direction: column !important;
			gap: 16px !important;
			padding: 0 !important;
			width: 100% !important;

			.speek-post-content-wrapper {
				background-color: #FDFDFC !important;
				background: #FDFDFC !important;
				display: flex !important;
				flex-direction: column !important;
				gap: 0 !important;
			}

			.speek-post-description {
				font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
				font-size: 16px !important;
				font-weight: 400 !important;
				line-height: 1.5em !important;
				color: #122023 !important;
				background-color: #FDFDFC !important;
				background: #FDFDFC !important;
				margin-bottom: 0 !important;
				
				// Remove margin-bottom from all child elements
				p,
				div,
				span,
				* {
					margin-bottom: 0 !important;
				}
				
				// Remove margin from last child
				> *:last-child {
					margin-bottom: 0 !important;
				}
			}
		}

		// Ensure all content inside has correct background
		.content,
		[component="post/content"],
		.speek-post-signature,
		p,
		div:not(.speek-user-avatar):not(.speek-user-avatar *),
		span:not(.speek-user-avatar *):not(.speek-user-avatar span) {
			color: #122023 !important;
		}

		// Preserve avatar background (should remain as is)
		.speek-user-avatar,
		.speek-user-avatar a,
		.speek-user-avatar *,
		.speek-user-avatar img,
		.speek-user-avatar span,
		.speek-user-avatar i {
			background-color: transparent !important;
			background: transparent !important;
		}
	}


	[component="topic/thumb/list"] > a{
		height: calc($font-size-base * 4);
	}
	
	// Hide progress bar and navigator (but keep pagination visible)
	.navigator-mobile,
	.pagination-block {
		display: none !important;
	}

	// Ensure pagination is always visible when it exists
	[component="pagination"],
	.pagination-container {
		display: flex !important;
		visibility: visible !important;
		opacity: 1 !important;

		&.hidden {
			display: none !important;
		}
	}

	// =====================================
	// Pagination Styles (Posts Screen) - Button-like Design
	// =====================================
	.pagination-container {
		display: flex !important;
		justify-content: center;
		align-items: center;
		margin-top: 32px;
		margin-bottom: 24px;
		padding: 0 24px;
		width: 100%;
		visibility: visible !important;
		opacity: 1 !important;

		@include mobile {
			padding: 0 16px;
			margin-top: 24px;
			margin-bottom: 16px;
		}

		@include tablet {
			padding: 0 16px;
			margin-top: 24px;
			margin-bottom: 20px;
		}

		.pagination {
			margin: 0;
			gap: 8px;
			display: flex !important;
			align-items: center;
			justify-content: center;
			flex-wrap: wrap;
			list-style: none;
			padding: 0;
			visibility: visible !important;
			opacity: 1 !important;

			.page-item {
				margin: 0;
				display: flex;
				align-items: center;

				&.disabled {
					opacity: 0.4;
					pointer-events: none;
					cursor: not-allowed;

					.page-link {
						cursor: not-allowed;
						opacity: 0.5;

						&.pagination-nav-btn {
							background-color: #F5F5F5;
							border-color: #E5E5E5;

							.pagination-icon {
								color: #9E9E9E;
							}
						}
					}
				}

				.page-link {
					display: flex;
					align-items: center;
					justify-content: center;
					min-width: 44px;
					height: 44px;
					padding: 0 16px;
					font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
					font-size: 14px;
					font-weight: 600;
					line-height: 1.5em;
					color: #122023;
					background-color: #FFFFFF;
					border: 1px solid #D4D4D4;
					border-radius: 8px;
					text-decoration: none;
					transition: all 0.2s ease;
					cursor: pointer;
					box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05);

					&:hover:not(.disabled) {
						background-color: #F5F5F5;
						border-color: #355E66;
						color: #355E66;
						transform: translateY(-1px);
						box-shadow: 0px 4px 6px -2px rgba(0, 0, 0, 0.1), 0px 6px 10px -1px rgba(0, 0, 0, 0.1);
					}

					&:active:not(.disabled) {
						transform: translateY(0);
						box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.05);
					}

					&:focus {
						outline: none;
						box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05), 0 0 0 3px rgba(53, 94, 102, 0.12);
					}

					i {
						font-size: 14px;
					}
				}


				&.previous,
				&.next {
					.page-link {
						&.pagination-nav-btn {
							width: 44px;
							height: 44px;
							min-width: 44px;
							padding: 0;
							border-radius: 50%;
							background-color: #F8F8F8;
							border: 1px solid #E0E0E0;
							box-shadow: none;
							display: flex;
							align-items: center;
							justify-content: center;

							.pagination-icon {
								width: 20px;
								height: 20px;
								color: #355E66;
								stroke-width: 2;
							}

							&:hover:not(.disabled) {
								background-color: #F0F0F0;
								border-color: #D0D0D0;
								transform: none;
								box-shadow: none;
							}

							&:active:not(.disabled) {
								background-color: #E8E8E8;
								transform: scale(0.95);
							}

							&:focus {
								outline: none;
								box-shadow: 0 0 0 2px rgba(53, 94, 102, 0.15);
							}
						}
					}
				}


			}
		}

		// Page indicator (current page / total pages)
		.page-item.select-page {
			.page-link {
				background-color: transparent;
				border: none;
				color: #122023;
				font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
				font-size: 14px;
				font-weight: 500;
				padding: 0 16px;
				min-width: auto;
				height: auto;
				box-shadow: none;

				&:hover {
					background-color: transparent;
					border: none;
					color: #122023;
					transform: none;
					box-shadow: none;
				}
			}
		}
	}
	
	// Remove bottom spacing
	.posts-container,
	.posts.timeline {
		padding-top: 0 !important;
		padding-bottom: 0 !important;
		margin-bottom: 0 !important;
		min-height: auto !important;
		height: auto !important;
	}
	
	// Remove bottom margin from last post
	.posts.timeline > li:last-child {
		margin-bottom: 0 !important;
		padding-bottom: 0 !important;
	}
	
	// Remove bottom spacing from containers
	.d-flex.flex-column.gap-3 {
		margin-bottom: 0 !important;
		padding-bottom: 0 !important;
		min-height: auto !important;
		height: auto !important;
	}
	
	.row.mb-4 {
		margin-bottom: 0 !important;
		min-height: auto !important;
		height: auto !important;
	}
	
	// Ensure no min-height on body that could cause empty space on first load
	body.template-topic {
		min-height: auto !important;
		height: auto !important;
	}
	
	// Remove bottom margin from quick reply
	.speek-quick-reply {
		margin-bottom: 0 !important;
	}
	
	// Remove bottom spacing from topic container
	.topic {
		margin-bottom: 0 !important;
		padding-bottom: 0 !important;
	}
	
	// Remove footer widget area spacing
	[data-widget-area="footer"] {
		margin-top: 0 !important;
		padding-top: 0 !important;
	}
	
	// =====================================
	// Fix Parent Container Overflow Issues for Dropdowns
	// =====================================
	
	// Ensure all Bootstrap containers allow dropdown overflow
	.container,
	.container-fluid,
	.container-lg,
	.container-md,
	.container-sm,
	.container-xl,
	.container-xxl {
		overflow: visible !important;
		position: relative !important;
	}
	
	// Fix Bootstrap columns
	[class*="col-"] {
		overflow: visible !important;
		position: relative !important;
	}
	
	// Fix Bootstrap rows
	.row {
		overflow: visible !important;
		position: relative !important;
	}
	
	// Fix any div that might be clipping dropdowns
	div:has(.btn-group),
	div:has(.dropdown),
	div:has(.bottom-sheet) {
		overflow: visible !important;
		position: relative !important;
	}
	
	// Style dropdown menu background for three-dot menu (admin side)
	[component="post/actions"] {
		[component="post/tools"] {
			.dropdown-menu {
				background-color: #FCF9ECFA !important;
				background: #FCF9ECFA !important;
			}
		}
	}
	
	// Style dropdown menu in post actions footer (if exists)
	.speek-post-actions-footer {
		[component="post/actions"] {
			[component="post/tools"] {
				.dropdown-menu {
					background-color: #FCF9ECFA !important;
					background: #FCF9ECFA !important;
				}
			}
		}
	}

	// =====================================
	// Universal dropdown menu styling for consistency
	// =====================================
	
	// Ensure all dropdown menus have consistent styling
	.dropdown-menu {
		background-color: #FCF9ECFA !important;
		background: #FCF9ECFA !important;
		border: 1px solid rgba(0, 0, 0, 0.1) !important;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
		
		.dropdown-item {
			color: #122023 !important;
			font-size: 14px !important;
			
			i {
				color: #525252 !important;
			}
			
			&:hover {
				background-color: rgba(53, 94, 102, 0.1) !important;
			}
		}
	}

	// =====================================
	// Disable selection quote tooltip
	// =====================================

	// Hide the quote tooltip that appears when selecting text in posts
	[component="selection/tooltip"] {
		display: none !important;
		visibility: hidden !important;
		opacity: 0 !important;
		pointer-events: none !important;
	}

	// =====================================
	// Edit Indicator Icon - Disabled with Tooltip
	// =====================================
	
	[component="post/edit-indicator"].edit-icon {
		cursor: default !important;
		color: #000000 !important;
		font-size: 0.875rem;
		user-select: none !important;
		
		&:hover {
			cursor: default !important;
			color: #000000 !important;
		}
	}

	// =====================================
	// Inline Post Edit Styles
	// =====================================

	.speek-post-card.speek-post-editing {
		position: relative;
		
		.speek-post-edit-container {
			width: 100%;
			margin-top: 8px;
			
			.speek-post-edit-textarea {
				width: 100%;
				min-height: 120px;
				padding: 12px;
				border: 1px solid #E0DBC7;
				border-radius: 8px;
				font-size: 14px;
				line-height: 1.5;
				resize: vertical;
				font-family: inherit;
				background-color: #FFFFFF;
				color: var(--bs-body-color, #333);
				
				&:focus {
					outline: none;
					border-color: rgba(164, 149, 91, 0.5) !important;
					border-width: 2px !important;
					box-shadow: 0 0 0 0px rgba(164, 149, 91, 0) !important;
				}
			}
			
			.speek-post-edit-buttons {
				justify-content: flex-end;
				
				.btn {
					min-width: 80px;
					font-size: 14px;
					padding: 6px 16px;
				}
				
				.speek-post-edit-save-btn {
					background: #E6FF00 !important;
					color: #27454B !important;
					border: none !important;
					border-radius: 9999px !important;
					font-weight: 700 !important;
					box-shadow: 0px 2px 4px -2px rgba(0, 0, 0, 0.05), 0px 4px 6px -1px rgba(0, 0, 0, 0.05) !important;
					transition: all 0.2s ease !important;
					
					&:hover:not(:disabled) {
						background: #D4E600 !important;
						color: #27454B !important;
						box-shadow: 0px 4px 6px -2px rgba(0, 0, 0, 0.1), 0px 6px 10px -1px rgba(0, 0, 0, 0.1) !important;
					}
					
					&:active:not(:disabled) {
						transform: translateY(0);
					}
					
					&:disabled {
						opacity: 0.6 !important;
						cursor: not-allowed !important;
						background: #E6FF00 !important;
						color: #27454B !important;
					}
					
					&:focus-visible {
						outline: none !important;
						box-shadow: 0 0 0 3px rgba(230, 255, 0, 0.3) !important;
					}
				}
				
				.speek-post-edit-cancel {
					border-radius: 9999px !important;
				}
			}
		}
	}
}

@include media-breakpoint-up(lg) {
	body.template-topic {
		padding-bottom: 48px;

		.topic {
			margin-bottom: 48px;
			padding-bottom: 32px;
		}

		.posts-container {
			padding-bottom: 32px;
		}

		.topic .posts {
			[component="post"] {
				[component="post/actions"] {
					opacity: 1;
				}
			}
		}
	}
}