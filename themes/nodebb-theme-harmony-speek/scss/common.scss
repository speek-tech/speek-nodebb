
html {
	height: 100%;
	// Hide scrollbar but keep scroll functionality
	// Firefox
	scrollbar-width: none;
	// IE and Edge (older)
	-ms-overflow-style: none;

	// Webkit browsers (Chrome, Safari, Edge)
	&::-webkit-scrollbar {
		display: none;
		width: 0;
		height: 0;
	}
}

body {
	overflow-y: scroll;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-rendering: optimizeLegibility;

	// Explicit font family declaration for DM Sans
	font-family: "DM Sans", sans-serif;
	font-weight: 400;
	font-size: 16px;
	line-height: 24px;

	// Hide scrollbar but keep scroll functionality
	// Firefox
	scrollbar-width: none;
	// IE and Edge (older)
	-ms-overflow-style: none;

	// Webkit browsers (Chrome, Safari, Edge)
	&::-webkit-scrollbar {
		display: none;
		width: 0;
		height: 0;
	}
}

// Disable scrolling when in iframe (detected via script adding class)
// The parent window will resize the iframe to fit the content
body.in-iframe {
	overflow: hidden !important;
	height: auto !important;
	min-height: 100% !important;
}

// Also disable html scrolling when in iframe
html:has(body.in-iframe) {
	overflow: hidden !important;
	height: auto !important;
}

@mixin speek-inline-dropdown {
	position: relative;

	.dropdown-menu {
		display: block;
		visibility: hidden;
		opacity: 0;
		position: absolute !important;
		top: calc(100% + 8px) !important;
		left: 0 !important;
		right: auto !important;
		bottom: auto !important;
		margin: 0 !important;
		padding: 0.5rem;
		min-width: 220px;
		border-radius: 18px;
		border: 1px solid rgba(53, 94, 102, 0.12);
		background-color: rgba(252, 249, 236, 0.98);
		box-shadow: 0 20px 40px -18px rgba(31, 45, 50, 0.25);
		overflow: visible;
		max-height: 75vh;
		overflow-y: auto;
		transform: translate3d(0, 6px, 0);
		transition:
			opacity 160ms ease,
			transform 180ms ease,
			visibility 0s linear 180ms;
		z-index: 1000;
		pointer-events: none;
	}

	.dropdown-menu.show {
		opacity: 1;
		visibility: visible;
		transform: none;
		pointer-events: auto;
		transition-delay: 0s;
	}
}

.bottom-sheet {
	@include mobile {
		@include speek-inline-dropdown;
	}

	@include tablet {
		@include speek-inline-dropdown;
	}
}

@include desktop-up {
	.bottom-sheet {
		position: relative;

		.dropdown-menu {
			margin-top: 0 !important;
			top: calc(100% + 8px) !important;
			left: 0 !important;
			right: auto !important;
			bottom: auto !important;
			transform: translate3d(0, 8px, 0) !important;
		}
	}
}

@include media-breakpoint-down(lg) {
	body:not(.page-user-chats) {
		min-height: 100vh;
		.layout-container {
			min-height: 100vh;
		}
	}
}

// fixes chrome font boosting :/ https://stackoverflow.com/questions/13430897/how-to-override-font-boosting-in-mobile-chrome
body * {
	max-height:1000000px;
	text-size-adjust: none;
	-webkit-text-size-adjust: none;
	-moz-text-size-adjust: none;
}

hr {
	border-top-color: var(--bs-border-color);
	opacity: 1;
}

.ff-base { font-family: $font-family-base !important; }
.ff-sans { font-family: $font-family-sans-serif !important; }
.ff-secondary { font-family: $font-family-secondary; }
.tracking-tight { letter-spacing: -0.02em; }

.caret {
	&::after {
		border: none;
		font-family: "FontAwesome";
		content: "\f078";
	}
}

.placeholder-wave {
	opacity: 0.5;
}

.bg-card-cap {
	--bs-bg-opacity: 1;
	background-color: $card-cap-bg!important;
}

blockquote {
	$bq-border-color: mix($light, $dark, 75%);
	@extend .text-bg-light;
	font-style: normal;
	border-left: 2px solid $bq-border-color;
	padding: 1rem;
	p:last-child {
		margin-bottom: 0;
	}
	.toggle {
		border-color: $bq-border-color!important;
	}
}

// Remove global padding to allow responsive handling
.layout-container {
	padding-bottom: 0 !important;
}

#panel {
	margin-top: 0 !important;
}

#content {
	padding: 0 !important;
	margin-bottom: 0 !important;
}

.container-lg {
	padding-left: 0 !important;
	padding-right: 0 !important;
}

body:not(.page-user) {
	#content {
		transition: opacity 150ms linear;
		&.ajaxifying {
			-moz-opacity: 0;
			opacity: 0;
		}
	}
}
.page-user {
	#content {
		transition: opacity 150ms linear;
		&.ajaxifying .account-content {
			transition: opacity 150ms linear;
			-moz-opacity: 0;
			opacity: 0;
		}
	}
}

.sticky-tools {
	position: sticky;
	z-index: 3;
	top: 0;
	padding: 0.25rem 0;
}
// quartz doesn't need body-bg for tool background
.skin-quartz .sticky-tools {
	background-color: initial;
}

.flex-basis-md-200 {
	@include media-breakpoint-up(md) {
		flex-basis: 200px!important;
	}
}

.markdown-highlight {
	@extend .shadow-sm;
	@extend .border;
}

[component="chat/message/body"], [component="post/content"] {
	.img-fluid {
		@extend .shadow-sm;
		padding: $spacer * 0.5;
		margin: $spacer * 0.5 0;
		border: 1px solid $border-color;
		background-color: $light;
		border-radius: $border-radius-sm;
		max-height: 500px;
		width: auto;
	}
}

[component="chat/message/body"],
[component="post/content"],
[component="topic/teaser"] .post-content,
[component="category/posts"] .post-content,
.post-queue.posts-list .post-content {
	a { text-decoration: underline;}
}

// Button link styles (from global.scss)
.btn-link {
	&:hover,
	&.active {
		background-color: var(--btn-ghost-hover-color);
		text-decoration: none;
	}
}

// Hide built-in NodeBB alert/notification toasts (forum updated, connection lost, etc.)
#alerts,
#alerts .alert {
	display: none !important;
}

// Safety net: hide any stray Bootstrap alert toasts NodeBB might append elsewhere
.alert.alert-info,
.alert.alert-warning,
.alert.alert-success,
.alert.alert-danger {
	display: none !important;
}